<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_general_meeting_sheet">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <div class="oe_structure"/>
                        <br></br>
                        <div style="text-align: center;">
                            <h2><span t-field="o.name"/></h2>
                        </div>
                        <br></br>
                        <div style="text-align: center;">
                            <div>Conformément à l’article 14 du décret du 17 Mars 1967, il a été établi une feuille de présence qui a été émargée par chaque membre de l’assemblée entrant en séance.</div>
                            <div>Assemblée Générale des copropriétaires de l’ensemble immobilier en date du <span t-field="o.date"/>. </div>
                            <div>Le syndicat des copropriétaires de l’ensemble immobilier s’est réuni : <span t-field="o.meeting_place"/></div>
                            <div>La feuille de présence qui sera certifiée sincère et véritable par les membres du bureau, permet de constater que les copropriétaires présents et représentés possèdent <span t-field="o.share_of_ownership_attendance"/> sur un total de <span t-field="o.share_of_ownership_total"/> tantièmes</div>
                            <div>L’assemblée étant en mesure de prendre des décisions valables est déclarée régulièrement constituée.</div>
                        </div>
                        <br></br>
                        <h3>General information :</h3>
                        <div class="row mt32 mb32">
                            <div class="col-3">
                                <strong>Meeting type:</strong>
                                <p t-field="o.meeting_type"/>
                            </div>
                             <div class="col-3">
                                <strong>Date:</strong>
                                <p t-field="o.date"/>
                            </div>
                             <div class="col-3">
                                <strong>Place:</strong>
                                <p t-field="o.meeting_place"/>
                            </div>
                             <div class="col-3">
                                <strong>share of ownership attendance:</strong>
                                <p t-field="o.share_of_ownership_attendance"/>
                            </div>
                        </div>
                        <br></br>
                        <h3>Members :</h3>
                        <div class="row mt32 mb32">
                            <div class="col-3">
                                <strong>Co-ownership trustee:</strong>
                                <p t-field="o.coownership_trustee_id.name"/>
                            </div>
                            <div class="col-3">
                                <strong>President:</strong>
                                <p t-field="o.president_id.name"/>
                            </div>
                            <div class="col-3">
                                <strong>Teller:</strong>
                                <p t-field="o.teller_id.name"/>
                            </div>
                            <div class="col-3">
                                <strong>Secretary:</strong>
                                <p t-field="o.secretary_id.name"/>
                            </div>
                        </div>
                        <br></br>
                        <h3>Order of the day :</h3>
                        <div class="row mt32 mb32">
                            <div class="col-12">
                                <p t-field="o.order_of_the_day"/>
                            </div>
                        </div>
                    
                        <br></br>
                        <h3>Report :</h3>
                        <div class="row mt32 mb32">
                            <div class="col-3">
                                <p t-field="o.report_meeting"/>
                            </div>
                        </div>

                        <br></br>
                        <h3>Attendance</h3>
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>Apartment</th>
                                    <th>Homeowner</th>
                                    <th>Garage</th>
                                    <th>Parking space</th>
                                    <th>share of ownership</th>
                                    <th>Signature</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="o.attendance_line_ids" t-as="line">
                                    <td><span t-field="line.apartment_id"/></td>
                                    <td><span t-field="line.homeowner_id"/></td>
                                    <td><span t-field="line.garage"/></td>
                                    <td><span t-field="line.parking_space"/></td>
                                    <td><span t-field="line.share_of_ownership"/></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>

                        <br></br>
                        <h3>Siganture :</h3>
                        <div class="row mt32 mb32">
                            <div class="col-3">
                                <strong>Co-ownership trustee:</strong>
                                <p t-field="o.coownership_trustee_id.name"/>
                            </div>
                            <div class="col-3">
                                <strong>President:</strong>
                                <p t-field="o.president_id.name"/>
                            </div>
                            <div class="col-3">
                                <strong>Teller:</strong>
                                <p t-field="o.teller_id.name"/>
                            </div>
                            <div class="col-3">
                                <strong>Secretary:</strong>
                                <p t-field="o.secretary_id.name"/>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <record id="action_report_general_meeting_sheet" model="ir.actions.report">
        <field name="name">General meeting</field>
        <field name="model">general.meeting</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">condominium_management.report_general_meeting_sheet</field>
        <field name="report_file">condominium_management.report_general_meeting_sheet</field>
        <field name="print_report_name">'%s - %s' % (object.meeting_type, (object.name).replace('/', ''))</field>
        <field name="binding_model_id" ref="model_general_meeting"/>
        <field name="binding_type">report</field>
    </record>

</odoo>